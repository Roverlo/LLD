<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';"
        />
        <title>ZTEuSmartViewLLD</title>
        <link rel="icon" href="./assets/logo5.png" type="image/png" />
        <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <canvas></canvas>
        <div class="content-wrapper">
            <h1>ZTEuSmartViewLLD</h1>
            <h2>网络服务处视频交付科</h2>
            <form id="params-form">
                <div class="tabs">
                    <button type="button" class="tab-link active" data-tab="tab1">基础配置</button>
                    <button type="button" class="tab-link" data-tab="tab2">网络配置</button>
                    <button type="button" class="tab-link" data-tab="tab3">业务配置</button>
                    <button type="button" class="tab-link" data-tab="tab5">服务器规格</button>
                </div>

                <div id="tab1" class="tab-content active">
                    <div class="container">
                        <fieldset class="core-architecture">
                            <legend>核心架构</legend>
                            <div class="form-group">
                                <label for="isNetCombined">管理/业务网合设:</label>
                                <div class="custom-select-wrapper">
                                    <select id="isNetCombined">
                                        <option value="true">是</option>
                                        <option value="false" selected>否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="isDualNode">管理节点双机:</label>
                                <div class="custom-select-wrapper">
                                    <select id="isDualNode">
                                        <option value="true" selected>是</option>
                                        <option value="false">否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="isCephDual">Ceph管理双机:</label>
                                <div class="custom-select-wrapper">
                                    <select id="isCephDual">
                                        <option value="true" selected>是</option>
                                        <option value="false">否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="isFusionNode">计算/存储合设:</label>
                                <div class="custom-select-wrapper">
                                    <select id="isFusionNode">
                                        <option value="true">是</option>
                                        <option value="false" selected>否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="isMngAsFusion">管理节点也计入超融合:</label>
                                <div class="custom-select-wrapper">
                                    <select id="isMngAsFusion">
                                        <option value="true">是</option>
                                        <option value="false" selected>否</option>
                                    </select>
                                </div>
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend>服务器数量与命名</legend>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="countMng">管理服务器数量:</label>
                                    <label for="prefixMng">命名前缀:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="countMng" value="2" />
                                    <input type="text" id="prefixMng" value="VMC" />
                                </div>
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="countFusion">超融合/计算服务器数量:</label>
                                    <label for="prefixFusion">命名前缀:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="countFusion" value="3" />
                                    <input type="text" id="prefixFusion" value="ZXVE" />
                                </div>
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="countStor">存储服务器数量:</label>
                                    <label for="prefixStor">命名前缀:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="countStor" value="3" />
                                    <input type="text" id="prefixStor" value="STOR" />
                                </div>
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="countCAG">CAG数量:</label>
                                    <label for="prefixCAG">命名前缀:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="countCAG" value="3" />
                                    <input type="text" id="prefixCAG" value="CAG" />
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>

                <div id="tab2" class="tab-content">
                    <div class="network-config-container">
                        <!-- 网络绑定配置区域 -->
                        <div class="network-binding-section">
                            <h3 class="section-title">网络绑定配置</h3>
                            <div class="binding-cards-grid">
                                <div class="network-card management-network">
                                    <div class="card-header">
                                        <h4 class="card-title">管理网绑定</h4>
                                        <span class="network-icon">🔧</span>
                                    </div>
                                    <div class="card-content">
                                        <div class="form-row">
                                            <label for="mngBondName">级联端口名称:</label>
                                            <input type="text" id="mngBondName" value="brcomm_bond" />
                                        </div>
                                        <div class="form-row">
                                            <label for="mngBondNics">绑定网卡:</label>
                                            <input type="text" id="mngBondNics" value="enp133s0f0;enp134s0f0" />
                                        </div>
                                        <div class="form-row">
                                            <label for="mngBondMode">绑定模式:</label>
                                            <div class="custom-select-wrapper">
                                                <select id="mngBondMode">
                                                    <option value="active-backup" selected>active-backup</option>
                                                    <option value="lacp">LACP (802.3ad)</option>
                                                    <option value="balance-tlb">balance-tlb</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="network-card business-network" id="bizNetworkCard">
                                    <div class="card-header">
                                        <h4 class="card-title">业务网绑定</h4>
                                        <span class="network-icon">💼</span>
                                    </div>
                                    <div class="card-content">
                                        <div class="form-row">
                                            <label for="bizBondName">级联端口名称:</label>
                                            <input type="text" id="bizBondName" value="br0" />
                                        </div>
                                        <div class="form-row">
                                            <label for="bizBondNics">绑定网卡:</label>
                                            <input type="text" id="bizBondNics" value="enp133s0f1;enp134s0f1" />
                                        </div>
                                        <div class="form-row">
                                            <label for="bizBondMode">绑定模式:</label>
                                            <div class="custom-select-wrapper">
                                                <select id="bizBondMode">
                                                    <option value="active-backup" selected>active-backup</option>
                                                    <option value="lacp">LACP (802.3ad)</option>
                                                    <option value="balance-tlb">balance-tlb</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="network-card storage-network">
                                    <div class="card-header">
                                        <h4 class="card-title">存储网绑定</h4>
                                        <span class="network-icon">💾</span>
                                    </div>
                                    <div class="card-content">
                                        <div class="form-row">
                                            <label for="storBondName">级联端口名称:</label>
                                            <input type="text" id="storBondName" value="CephPublic" />
                                        </div>
                                        <div class="form-row">
                                            <label for="storBondNics">绑定网卡:</label>
                                            <input type="text" id="storBondNics" value="enp3s0;enp4s0" />
                                        </div>
                                        <div class="form-row">
                                            <label for="storBondMode">绑定模式:</label>
                                            <div class="custom-select-wrapper">
                                                <select id="storBondMode">
                                                    <option value="active-backup" selected>active-backup</option>
                                                    <option value="lacp">LACP (802.3ad)</option>
                                                    <option value="balance-tlb">balance-tlb</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- IP地址池配置区域 -->
                        <div class="ip-pool-section">
                            <h3 class="section-title">IP地址池配置</h3>
                            <div class="ip-pool-container">
                                <div class="ip-pool-grid">
                                    <div class="ip-pool-card management-ip">
                                        <div class="ip-card-header">
                                            <h4 class="ip-card-title">管理网IP段</h4>
                                            <span class="ip-status-indicator active"></span>
                                        </div>
                                        <div class="ip-input-wrapper">
                                            <textarea id="mngIpRange" rows="2" placeholder="192.168.1.10-192.168.1.100">192.168.1.10-192.168.1.100</textarea>
                                            <small class="form-hint">支持格式: 1.1.1.1-100, 1.1.2.0/24</small>
                                        </div>
                                    </div>

                                    <div class="ip-pool-card business-ip" id="bizIpCard">
                                        <div class="ip-card-header">
                                            <h4 class="ip-card-title">业务网IP段</h4>
                                            <span class="ip-status-indicator active"></span>
                                        </div>
                                        <div class="ip-input-wrapper">
                                            <textarea id="bizIpRange" rows="2" placeholder="192.168.2.10-192.168.2.100">192.168.2.10-192.168.2.100</textarea>
                                            <small class="form-hint">多个段可用分号、逗号、空格或换行分隔</small>
                                        </div>
                                    </div>

                                    <div class="ip-pool-card storage-public-ip">
                                        <div class="ip-card-header">
                                            <h4 class="ip-card-title">存储公共网IP段</h4>
                                            <span class="ip-status-indicator active"></span>
                                        </div>
                                        <div class="ip-input-wrapper">
                                            <textarea id="pubIpRange" rows="2" placeholder="192.168.3.10-192.168.3.100">192.168.3.10-192.168.3.100</textarea>
                                            <small class="form-hint">多个段可用分号、逗号、空格或换行分隔</small>
                                        </div>
                                    </div>

                                    <div class="ip-pool-card storage-cluster-ip">
                                        <div class="ip-card-header">
                                            <h4 class="ip-card-title">存储集群网IP段</h4>
                                            <span class="ip-status-indicator active"></span>
                                        </div>
                                        <div class="ip-input-wrapper">
                                            <textarea id="cluIpRange" rows="2" placeholder="192.168.4.10-192.168.4.100">192.168.4.10-192.168.4.100</textarea>
                                            <small class="form-hint">多个段可用分号、逗号、空格或换行分隔</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="ip-pool-options">
                                    <div class="option-card">
                                        <div class="option-header">
                                            <h4 class="option-title">浮动IP地址对齐</h4>
                                            <span class="option-icon">⚙️</span>
                                        </div>
                                        <div class="option-content">
                                            <label class="option-description">为浮动IP预留存储地址以对齐（建议）:</label>
                                            <div class="radio-group modern-radio">
                                                <input type="radio" id="alignFloatIpYes" name="alignFloatIp" value="true" checked />
                                                <label for="alignFloatIpYes">是</label>
                                                <input type="radio" id="alignFloatIpNo" name="alignFloatIp" value="false" />
                                                <label for="alignFloatIpNo">否</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tab3" class="tab-content">
                    <div class="container">
                        <fieldset class="vm-types-container">
                            <legend>桌面虚机类型</legend>
                            <div id="desktopVmTypes">
                                <div class="desktop-vm-type" data-type="A">
                                    <div class="vm-type-title">
                                        <label>桌面虚机类型A:</label>
                                    </div>
                                    <div class="vm-spec-grid">
                                        <div class="vm-spec-row">
                                            <label>CPU核数:</label>
                                            <input type="number" class="vm-cpu" min="1" value="4" />
                                        </div>
                                        <div class="vm-spec-row">
                                            <label>内存(GB):</label>
                                            <input type="number" class="vm-memory" min="1" value="8" />
                                        </div>
                                        <div class="vm-spec-row">
                                            <label>存储(GB):</label>
                                            <input type="number" class="vm-storage" min="1" value="200" />
                                        </div>
                                        <div class="vm-spec-row">
                                            <label>数量:</label>
                                            <input type="number" class="vm-count" min="0" value="500" />
                                        </div>
                                    </div>
                                </div>
                                <div class="desktop-vm-type" data-type="B">
                                    <div class="vm-type-title">
                                        <label>桌面虚机类型B:</label>
                                    </div>
                                    <div class="vm-spec-grid">
                                        <div class="vm-spec-row">
                                            <label>CPU核数:</label>
                                            <input type="number" class="vm-cpu" min="1" value="8" />
                                        </div>
                                        <div class="vm-spec-row">
                                            <label>内存(GB):</label>
                                            <input type="number" class="vm-memory" min="1" value="16" />
                                        </div>
                                        <div class="vm-spec-row">
                                            <label>存储(GB):</label>
                                            <input type="number" class="vm-storage" min="1" value="500" />
                                        </div>
                                        <div class="vm-spec-row">
                                            <label>数量:</label>
                                            <input type="number" class="vm-count" min="0" value="300" />
                                        </div>
                                    </div>
                                    <small class="form-hint">CPU核数、内存大小、存储大小和虚机数量 <button type="button" class="remove-vm-type-btn" onclick="DesktopVmManager.removeVmType('B')">删除</button></small>
                                </div>

                            </div>
                            <div class="form-group">
                                <button type="button" id="addVmType" class="add-vm-type-btn">+ 添加虚机类型</button>
                            </div>
                            <div class="form-group">
                                <label>总桌面虚机数量:</label>
                                <span id="totalVmCount">1000</span> 台
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend>部署选项</legend>
                            <div class="form-group">
                                <label for="userCount">用户量:</label>
                                <input type="text" inputmode="numeric" pattern="[0-9]*" id="userCount" value="1000" />
                            </div>
                            <div class="form-group">
                                <label for="scene">微服务场景:</label>
                                <div class="custom-select-wrapper">
                                    <select id="scene">
                                        <option>管理网和业务网隔离场景_运维通过管理网访问</option>
                                        <option>管理网和业务网隔离场景_运维通过业务网访问</option>
                                        <option>管理网和业务网互通场景</option>
                                        <option>管理网和业务网合一场景</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="isZXOPS">部署ZXOPS:</label>
                                <div class="custom-select-wrapper">
                                    <select id="isZXOPS">
                                        <option value="true" selected>是</option>
                                        <option value="false">否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="insightDeployType">Insight部署:</label>
                                <div class="custom-select-wrapper">
                                    <select id="insightDeployType">
                                        <option>否</option>
                                        <option>非高可用部署</option>
                                        <option>高可用部署</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="deployTerminalMgmt">部署终端网管:</label>
                                <div class="custom-select-wrapper">
                                    <select id="deployTerminalMgmt">
                                        <option value="true">是</option>
                                        <option value="false" selected>否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="deployCAGPortal">部署CAG门户:</label>
                                <div class="custom-select-wrapper">
                                    <select id="deployCAGPortal">
                                        <option value="高可用部署">高可用部署</option>
                                        <option value="非高可用部署">非高可用部署</option>
                                        <option value="否" selected>否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="deployDEM">部署DEM:</label>
                                <div class="custom-select-wrapper">
                                    <select id="deployDEM">
                                        <option value="true" selected>是</option>
                                        <option value="false">否</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="downloadType">部署升级服务器:</label>
                                <div class="custom-select-wrapper">
                                    <select id="downloadType">
                                        <option>否</option>
                                        <option>单机部署</option>
                                        <option selected>集群部署</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="storageSecurity">存储安全:</label>
                                <div class="custom-select-wrapper">
                                    <select id="storageSecurity">
                                        <option>3副本</option>
                                        <option>2副本</option>
                                        <option>4+2纠删码</option>
                                    </select>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>

                <div id="tab5" class="tab-content">
                    <div class="container">
                        <fieldset>
                            <legend>管理服务器配置信息</legend>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="mngSsdCount">SSD盘（非系统盘）数量:</label>
                                    <label for="mgmtSsdSpec">规格（TB）:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="mngSsdCount" min="0" value="2" />
                                    <input type="text" id="mgmtSsdSpec" placeholder="如: 1.92" value="1.92" />
                                </div>
                                <small class="form-hint">每台服务器的SSD硬盘数量和规格</small>
                            </div>
                            <div class="form-group server-config-item">
                                <label for="mgmtOsdReservedSize">单盘OSD预留大小（SSD资源紧张时启用）:</label>
                                <div class="inline-input-with-unit">
                                    <input
                                        type="number"
                                        id="mgmtOsdReservedSize"
                                        min="0"
                                        step="0.01"
                                        value="0"
                                        placeholder="如: 1.0"
                                    />
                                    <span class="input-unit">TB</span>
                                </div>
                                <small class="form-hint"
                                    >OSD预留容量具体指将SSD盘分成两部分，一部分用作SSD存储，一部分用作缓存。预留的容量用来创建OSD，不用做缓存盘。OSD预留容量不能超过90%。</small
                                >
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="mngHddCount">HDD盘数量:</label>
                                    <label for="mgmtHddSpec">规格（TB）:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="mngHddCount" min="0" value="4" />
                                    <input type="text" id="mgmtHddSpec" placeholder="如: 8" value="8" />
                                </div>
                                <small class="form-hint">每台服务器的HDD硬盘数量和规格</small>
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="mngCpuCores">CPU核数:</label>
                                    <label for="mngMemory">内存大小(GB):</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="mngCpuCores" min="1" value="32" />
                                    <input type="number" id="mngMemory" min="1" value="128" />
                                </div>
                                <small class="form-hint">每台服务器的CPU核心数和内存大小</small>
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend>计算（超融合）服务器配置信息</legend>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="fusionSsdCount">SSD盘（非系统盘）数量:</label>
                                    <label for="fusionSsdSpec">规格（TB）:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="fusionSsdCount" min="0" value="2" />
                                    <input type="text" id="fusionSsdSpec" placeholder="如: 1.92" value="1.92" />
                                </div>
                                <small class="form-hint">每台服务器的SSD硬盘数量和规格</small>
                            </div>
                            <div class="form-group server-config-item">
                                <label for="fusionOsdReservedSize">单盘OSD预留大小（SSD资源紧张时启用）:</label>
                                <div class="inline-input-with-unit">
                                    <input
                                        type="number"
                                        id="fusionOsdReservedSize"
                                        min="0"
                                        step="0.01"
                                        value="0"
                                        placeholder="如: 1.0"
                                    />
                                    <span class="input-unit">TB</span>
                                </div>
                                <small class="form-hint"
                                    >OSD预留容量具体指将SSD盘分成两部分，一部分用作SSD存储，一部分用作缓存。预留的容量用来创建OSD，不用做缓存盘。OSD预留容量不能超过90%。</small
                                >
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="fusionHddCount">HDD盘数量:</label>
                                    <label for="fusionHddSpec">规格（TB）:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="fusionHddCount" min="0" value="4" />
                                    <input type="text" id="fusionHddSpec" placeholder="如: 8" value="8" />
                                </div>
                                <small class="form-hint">每台服务器的HDD硬盘数量和规格</small>
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="fusionCpuCores">CPU核数:</label>
                                    <label for="fusionMemory">内存大小(GB):</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="fusionCpuCores" min="1" value="64" />
                                    <input type="number" id="fusionMemory" min="1" value="256" />
                                </div>
                                <small class="form-hint">每台服务器的CPU核心数和内存大小</small>
                            </div>
                        </fieldset>

                        <fieldset>
                            <legend>存储服务器配置信息</legend>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="storSsdCount">SSD盘（非系统盘）数量:</label>
                                    <label for="storSsdSpec">规格（TB）:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="storSsdCount" min="0" value="2" />
                                    <input type="text" id="storSsdSpec" placeholder="如: 1.92" value="1.92" />
                                </div>
                                <small class="form-hint">每台服务器的SSD硬盘数量和规格</small>
                            </div>
                            <div class="form-group server-config-item">
                                <label for="storOsdReservedSize">单盘OSD预留大小（SSD资源紧张时启用）:</label>
                                <div class="inline-input-with-unit">
                                    <input
                                        type="number"
                                        id="storOsdReservedSize"
                                        min="0"
                                        step="0.01"
                                        value="0"
                                        placeholder="如: 1.0"
                                    />
                                    <span class="input-unit">TB</span>
                                </div>
                                <small class="form-hint"
                                    >OSD预留容量具体指将SSD盘分成两部分，一部分用作SSD存储，一部分用作缓存。预留的容量用来创建OSD，不用做缓存盘。OSD预留容量不能超过90%。</small
                                >
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="storHddCount">HDD盘数量:</label>
                                    <label for="storHddSpec">规格（TB）:</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="storHddCount" min="0" value="4" />
                                    <input type="text" id="storHddSpec" placeholder="如: 8" value="8" />
                                </div>
                                <small class="form-hint">每台服务器的HDD硬盘数量和规格</small>
                            </div>
                            <div class="form-group aligned-form server-config-item">
                                <div class="label-row">
                                    <label for="storCpuCores">CPU核数:</label>
                                    <label for="storMemory">内存大小(GB):</label>
                                </div>
                                <div class="input-row">
                                    <input type="number" id="storCpuCores" min="1" value="32" />
                                    <input type="number" id="storMemory" min="1" value="128" />
                                </div>
                                <small class="form-hint">每台服务器的CPU核心数和内存大小</small>
                            </div>
                        </fieldset>
                    </div>
                </div>

                <button type="submit">生成Excel</button>
            </form>
            <div id="status"></div>
        </div>

        <script src="./fluid.js" type="text/javascript"></script>
        <script src="./renderer.js" type="module"></script>
    </body>
</html>
